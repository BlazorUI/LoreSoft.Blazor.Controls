@page "/"

<h1>Hello, world!</h1>

Welcome to your new app.

<AutoComplete SearchMethod="@GetPeopleLocal"
              @bind-Value="@SelectedPerson"
              Placeholder="Search by first name..."
              Items="People">
    <SelectedTemplate Context="person">
        @person.FullName
    </SelectedTemplate>
    <ResultTemplate Context="person">
        @person.Firstname @person.Lastname
    </ResultTemplate>
</AutoComplete>

<hr />

@if (SelectedPerson != null)
{
    <p>Selected: @SelectedPerson.Firstname @SelectedPerson.Lastname</p>
}


@code {

    private List<Person> People = new List<Person>
{
        new Person { Firstname = "John", Lastname = "Smith" },
        new Person { Firstname = "Jane", Lastname = "Doe" },
        new Person { Firstname = "Tom", Lastname = "Jones" },
        new Person { Firstname = "Fred", Lastname = "Gouch" },
        new Person { Firstname = "John", Lastname = "Philips" },
        new Person { Firstname = "Jon", Lastname = "Thomas" }
    };

    private Person SelectedPerson;



    private async Task<List<Person>> GetPeopleLocal(string searchText)
    {
        //await Task.Delay(800);
        return await Task.FromResult(People.Where(x => x.Firstname.ToLower().Contains(searchText.ToLower())).ToList());
    }

    private void HandleFormSubmit()
    {
        Console.WriteLine("Form Submitted Successfully!");
    }
}
